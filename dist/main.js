(()=>{"use strict";function e(e){e=e.toLowerCase();let t="";for(let n=0;n<e.length;n++)" "===e[n]?(t+=e[n+1].toUpperCase(),n++):-1==='!@#$%^&*()-_=+[]{}:;"\\|<,>.?/~`'.indexOf(e[n])&&(t+=e[n]);return t}const t=document.querySelector(".content"),n=document.querySelector(".sidebar"),d={displayItem(n){const d=document.createElement("div"),i=document.createElement("ul"),o=document.createElement("button"),r=document.createElement("button"),c=e(n.title);for(const e in n)if(!0===n.propertyIsEnumerable(e)){const t=document.createElement("li");t.classList.add(c),t.textContent=n[e],i.appendChild(t)}d.id=c,d.classList.add("item-container"),d.appendChild(i),o.textContent="Edit",o.classList.add("editButtons"),o.id=`${c}Edit`,r.textContent="Remove",r.classList.add("removeButtons"),r.id=`${c}Remove`,d.appendChild(o),d.appendChild(r),t.appendChild(d)},displayAddItem(n){const d=e(n.title),i=document.createElement("button");i.textContent="Add Item",i.classList.add("addButton"),i.id=`${d}Add`,t.appendChild(i)},displayAllItems(e){for(const t in e)"title"!==t&&!0===e.propertyIsEnumerable(t)&&d.displayItem(e[t]);d.displayAddItem(e)},removeItem(e){const n=document.querySelector(`#${e}`);null!==n&&t.removeChild(n)},remProjAddButton(n){const d=e(n.title),i=document.querySelector(`#${d}Add`);t.removeChild(i)},removeAllItems(t){d.remProjAddButton(t);for(const n in t)if("title"!==n&&!0===t.propertyIsEnumerable(n)){const i=e(t[n].title);d.removeItem(i)}},displayProject(t){const d=e(t),i=document.createElement("div"),o=document.createElement("button"),r=document.createElement("button");i.id=d,i.classList.add("projectContainer"),o.id=`${d}Button`,o.classList.add("projectButtons"),r.id=`${d}RemoveButt`,r.classList.add("projectRemButtons"),o.textContent=t,r.textContent="x",i.appendChild(o),i.appendChild(r),n.appendChild(i)},displayAllProjects(e){for(const t in e)d.displayProject(e[t].title)},removeProject(e){const t=document.querySelector(`#${e}`);n.removeChild(t)},dropForm(){const e=document.createElement("form"),t=document.createElement("input"),d=document.createElement("input");return t.setAttribute("type","text"),d.setAttribute("type","submit"),d.setAttribute("value","Submit"),e.setAttribute("action","javascript:void(0);"),e.appendChild(t),e.appendChild(d),n.appendChild(e),{submit:d,form:e}},editMenu(e){const n=`.${e}`,d=document.querySelectorAll(n),i=document.createElement("form");i.id=`${e}Edit`,i.classList.add("edit-form"),d.forEach(((e,t)=>{if(0===t||1===t){const t=document.createElement("input");t.classList.add("edit-bar"),t.setAttribute("value",e.textContent),i.appendChild(t)}else if(2===t){const t=document.createElement("input");t.setAttribute("type","date"),t.classList.add("edit-bar"),t.setAttribute("value",e.textContent),i.appendChild(t)}else if(3===t)for(let e=0;e<3;e++){const t=document.createElement("input"),n=document.createElement("label");switch(t.setAttribute("name","priority"),t.setAttribute("type","radio"),e){case 0:t.setAttribute("value","Low"),n.textContent="Low";break;case 1:t.setAttribute("value","Medium"),n.textContent="Medium";break;case 2:t.setAttribute("value","High"),n.textContent="High"}i.appendChild(n),i.appendChild(t)}}));const o=document.createElement("input");o.setAttribute("type","submit"),o.setAttribute("value","Submit"),o.classList.add("submit-item-edit"),i.setAttribute("action","javascript:void(0);"),i.appendChild(o),t.appendChild(i)},addToProjectForm(){const e=document.createElement("form");e.classList.add("edit-form");for(let t=0;t<6;t++){const d=document.createElement("input");if(d.classList.add("newItemInputs"),t>2){var n=document.createElement("label");e.appendChild(n),d.setAttribute("type","radio"),d.setAttribute("name","priority")}switch(t){case 0:d.setAttribute("value","Title");break;case 1:d.setAttribute("value","Description");break;case 2:d.setAttribute("type","date");break;case 3:d.setAttribute("value","Low"),n.textContent="Low";break;case 4:d.setAttribute("value","Medium"),n.textContent="Medium";break;case 5:d.setAttribute("value","High"),n.textContent="High"}e.appendChild(d)}const d=document.createElement("input");d.setAttribute("type","submit"),d.setAttribute("value","Submit"),d.classList.add("submit-item-edit"),e.setAttribute("action","javascript:void(0);"),e.appendChild(d),t.appendChild(e)},unDropForm(e){n.removeChild(e)},remEditMenu(e){const n=document.querySelector(e);t.removeChild(n)}},i={isAdding:!1,projectInUse:""};if(0===Object.entries(localStorage).length)var o={};else o=localStorage.getItem("allProjects"),o=JSON.parse(o);function r(t,n){document.querySelectorAll(".submit-item-edit").forEach((i=>{i.addEventListener("click",(()=>{const i=document.querySelector(".edit-form");if("Title"===i[0].value)d.remEditMenu(".edit-form"),d.displayAddItem(o[t]),c(t);else{let a;for(let e=3;e<6;e++)if(!0===i[e].checked){a=i[e].value;break}const l=function(e,t,n,d){const i={changeTitle(e){this.title=e},changeDescription(e){this.description=e},changeDueDate(e){this.dueDate=e},changePriority(e){this.priority=e}},o={title:e,description:t,dueDate:n,priority:d};return Object.assign(Object.create(i),o)}(i[0].value,i[1].value,i[2].value,a),s=e(l.title);o[t][s]=l,d.displayItem(l),d.remEditMenu(".edit-form"),"edit"!==n&&(d.displayAddItem(o[t]),c(e(o[t].title))),function(e,t){const n=document.querySelector(`#${t}Edit`),i=document.querySelector(`#${t}Remove`);n.addEventListener("click",(t=>{const n=t.target.parentNode.id;d.editMenu(n),d.removeItem(n),delete o[e][n],r(e,"edit")})),i.addEventListener("click",(t=>{const n=t.target.parentNode.id;delete o[e][n],d.removeItem(n)}))}(t,s)}}))}))}function c(e){document.querySelector(`#${e}Add`).addEventListener("click",(function(){d.addToProjectForm(),r(e),d.remProjAddButton(o[e])}))}function a(e){const t=e.target.parentNode.id;void 0===i[t]||"display"===i[t]?(d.displayAllItems(o[t]),i[t]="remove",function(e){document.querySelectorAll(".editButtons").forEach((t=>{t.addEventListener("click",(t=>{const n=t.target.parentNode.id;d.editMenu(n),d.removeItem(n),delete o[e][n],r(e,"edit")}))})),document.querySelectorAll(".removeButtons").forEach((t=>{t.addEventListener("click",(t=>{const n=t.target.parentNode.id;d.removeItem(n),delete o[e][n]}))}))}(t),c(t)):(d.removeAllItems(o[t]),i[t]="display")}window.addEventListener("unload",(function(){localStorage.setItem("allProjects",JSON.stringify(o))})),d.displayAllProjects(o),document.querySelectorAll(".projectButtons").forEach((e=>{e.addEventListener("click",(e=>{a(e)}))})),document.querySelectorAll(".projectRemButtons").forEach((e=>{e.addEventListener("click",(e=>{d.removeProject(e.target.parentNode.id),document.querySelector(`#${e.target.parentNode.id}Add`)&&d.remProjAddButton(o[e.target.parentNode.id]),delete o[e.target.parentNode.id]}))})),document.querySelector("#add-project").addEventListener("click",(()=>{const t=d.dropForm();t.submit.addEventListener("click",(n=>{const i=n.target.previousSibling.value,r=e(n.target.previousSibling.value);if(""===r)d.unDropForm(t.form);else if(""!==r){const n=function(t){const n={addItem(t){this[e(t.title)]=t}},d={title:t};return Object.assign(Object.create(n),d)}(i);o[r]=n,d.displayProject(n.title),d.unDropForm(t.form),document.querySelector(`#${r}`).addEventListener("click",(e=>{a(e)})),document.querySelector(`#${r}RemoveButt`).addEventListener("click",(e=>{d.removeProject(e.target.parentNode.id),delete o[e.target.parentNode.id]}))}else d.unDropForm()}))}))})();